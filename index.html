<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AirSentinels - Mesure de particules fines</title>
    <link rel="icon" href="/lovable-uploads/83ccf48a-d0be-4ac1-9039-4c4a8295958c.png" type="image/png">
    
    <!-- Preconnect to external font services for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Preload critical fonts for immediate rendering -->
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"></noscript>
    
    <!-- DNS prefetch for other external services -->
    <link rel="dns-prefetch" href="https://api.mapbox.com">
    <link rel="dns-prefetch" href="https://shydpfwuvnlzdzbubmgb.supabase.co">
    
    <!-- Critical CSS for OptimizedPlaceholder only -->
    <style>
      /* Minimal CSS variables */
      :root {
        --background: 0 0% 99%;
        --foreground: 215 25% 27%;
        --primary: 142 76% 36%;
        --muted-foreground: 215.4 16.3% 46.9%;
      }
      
      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        :root {
          --background: 215 25% 13%;
          --foreground: 0 0% 98%;
          --primary: 142 76% 36%;
          --muted-foreground: 215 20.2% 65.1%;
        }
      }
      
      /* Only critical styles for OptimizedPlaceholder */
      #root {
        min-height: 100vh;
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
      }
      
      .min-h-screen { min-height: 100vh; }
      .bg-background { background-color: hsl(var(--background)); }
      .text-center { text-align: center; }
      .p-8 { padding: 2rem; }
      .text-2xl { font-size: 1.5rem; line-height: 2rem; }
      .font-semibold { font-weight: 600; }
      .mb-2 { margin-bottom: 0.5rem; }
      .text-muted-foreground { color: hsl(var(--muted-foreground)); }
      .mt-4 { margin-top: 1rem; }
      .w-8 { width: 2rem; }
      .h-8 { height: 2rem; }
      .rounded-full { border-radius: 9999px; }
      .mx-auto { margin-left: auto; margin-right: auto; }
      .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
      .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
      
      /* Spinner animation for placeholder */
      .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }
      
      /* Responsive utilities */
      @media (min-width: 640px) {
        .sm\\:px-4 { padding-left: 1rem; padding-right: 1rem; }
        .sm\\:py-6 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
      }
      
      /* Primary color with opacity for loading indicator */
      .bg-primary\\/20 {
        background-color: hsl(var(--primary) / 0.2);
      }
    </style>
    
    <!-- Defer the main CSS bundle -->
    <link rel="preload" href="/src/index.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/src/index.css"></noscript>
    <meta
      name="description"
      content="Application de mesure et contextualisation de l'exposition aux particules fines"
    />
    <meta name="author" content="Lovable" />

    <!-- Content Security Policy for Google APIs, Supabase, and Mapbox -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://apis.google.com https://*.gstatic.com https://cdn.gpteng.co; connect-src 'self' https://accounts.google.com https://apis.google.com https://www.googleapis.com https://*.supabase.co https://shydpfwuvnlzdzbubmgb.supabase.co https://*.mapbox.com https://api.mapbox.com; frame-src https://accounts.google.com; style-src 'self' 'unsafe-inline' https://*.gstatic.com https://fonts.googleapis.com https://api.mapbox.com; style-src-elem 'self' 'unsafe-inline' https://*.gstatic.com https://fonts.googleapis.com https://api.mapbox.com; font-src 'self' data: https://*.gstatic.com https://fonts.gstatic.com https://api.mapbox.com; img-src 'self' data: https://*.mapbox.com; worker-src 'self' blob:; object-src 'none';"
    />

    <meta property="og:title" content="d8e7ca00-b377-4793-af43-f6fcf3d043bd" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://lovable.dev/opengraph-image-p98pqg.png"
    />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta
      name="twitter:image"
      content="https://lovable.dev/opengraph-image-p98pqg.png"
    />
  </head>

  <body>
    <div id="root">
      <!-- Static HTML for immediate rendering (SSR-like) -->
      <div class="min-h-screen bg-background">
        <!-- Static Header -->
        <header class="fixed top-0 left-0 right-0 bg-background border-b border-border z-50">
          <div class="flex items-center justify-between h-14 px-4 max-w-7xl mx-auto">
            <div class="flex items-center gap-3">
              <div class="h-9 w-9 bg-muted rounded"></div>
              <h1 class="text-lg font-bold text-foreground">AirSentinels</h1>
            </div>
            <div class="h-9 w-9 bg-muted rounded-full"></div>
          </div>
        </header>
        
        <!-- Static Main Content -->
        <main class="pt-14 pb-20 px-4 max-w-7xl mx-auto">
          <div class="space-y-6 py-6">
            <!-- Static Air Quality Cards placeholders -->
            <div class="grid grid-cols-3 gap-3">
              <div class="bg-card border border-border rounded-lg p-4 text-center">
                <div class="text-xs text-muted-foreground mb-1">PM2.5</div>
                <div class="text-lg font-bold text-foreground">--</div>
                <div class="text-xs text-muted-foreground">μg/m³</div>
              </div>
              <div class="bg-card border border-border rounded-lg p-4 text-center">
                <div class="text-xs text-muted-foreground mb-1">PM10</div>
                <div class="text-lg font-bold text-foreground">--</div>
                <div class="text-xs text-muted-foreground">μg/m³</div>
              </div>
              <div class="bg-card border border-border rounded-lg p-4 text-center">
                <div class="text-xs text-muted-foreground mb-1">Quality</div>
                <div class="text-lg font-bold text-foreground">--</div>
              </div>
            </div>
            
            <!-- Static connection status -->
            <div class="text-center text-sm text-muted-foreground p-4 bg-muted/20 rounded-lg">
              Connect your PM sensor to start measurements
            </div>
          </div>
        </main>
      </div>
      
      <!-- Handle SPA routing for static hosts like GitHub Pages -->
      <script>
        (function() {
          var redirect = sessionStorage.redirect;
          delete sessionStorage.redirect;
          if (redirect && redirect !== location.href) {
            history.replaceState(null, null, redirect);
          }
        })();
      </script>
      
      <!-- JavaScript fallback - non-critical, can be deferred -->
      <script defer>
        // Hide static content when React takes over (non-critical)
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(function() {
            var staticContent = document.querySelector('#root > div');
            if (staticContent && window.React) {
              staticContent.style.display = 'none';
            }
          }, 100);
        });
      </script>
    </div>
    <script type="module" src="/src/main.tsx" defer></script>
  </body>
</html>
