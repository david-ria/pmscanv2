import{supabase as i}from"./client-zGYq1VIw.js";function o(a){const n=["network request failed","fetch failed","network error","connection failed","net::err_network_changed","net::err_internet_disconnected"],r=a.toLowerCase();return n.some(e=>r.includes(e))}function s(a){return o(a)?"You appear to be offline. Some features may not be available until your connection is restored.":"There was a problem connecting to our servers. Please try again later."}async function f(a,n){try{const{data:r,error:e}=await i.rpc(a,n);if(e){const t=e.message||"Database operation failed";return{data:null,error:t,isOffline:o(t)}}return{data:r,error:null,isOffline:!1}}catch(r){const e=r instanceof Error?r.message:"Unknown error occurred";return{data:null,error:s(e),isOffline:o(e)}}}async function c(a){try{const{data:n,error:r}=await a;if(r){const e=r.message||"Database query failed";return{data:null,error:e,isOffline:o(e)}}return{data:n,error:null,isOffline:!1}}catch(n){const r=n instanceof Error?n.message:"Unknown error occurred";return{data:null,error:s(r),isOffline:o(r)}}}async function l(a,n){try{const{data:r,error:e}=await i.functions.invoke(a,n);if(e){const t=e.message||"Edge function call failed";return{data:null,error:t,isOffline:o(t)}}return{data:r,error:null,isOffline:!1}}catch(r){const e=r instanceof Error?r.message:"Unknown error occurred";return{data:null,error:s(e),isOffline:o(e)}}}function u(){return!navigator.onLine}const g={rpc:f,query:c,functions:l,isOffline:u};export{g as o};
