const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/index-DnKT6hDb.js","assets/js/supabase--OITQzG1.js","assets/js/vendor-CRCfYjC_.js","assets/js/query-BewfWFH7.js","assets/js/router-D6wdMmGF.js","assets/js/theme-D-6-9UvQ.js","assets/js/ui-core-CibF-ClQ.js","assets/js/utils-EL5wpLGY.js","assets/js/notifications-6vUXhpBr.js","assets/js/i18n-DZz6YkIP.js","assets/index-BOVYw4lO.css"])))=>i.map(i=>d[i]);
import{_ as a}from"./supabase--OITQzG1.js";import{i as s,l as d}from"./index-DnKT6hDb.js";import"./vendor-CRCfYjC_.js";import"./query-BewfWFH7.js";import"./router-D6wdMmGF.js";import"./theme-D-6-9UvQ.js";import"./ui-core-CibF-ClQ.js";import"./utils-EL5wpLGY.js";import"./notifications-6vUXhpBr.js";import"./i18n-DZz6YkIP.js";class c{tasks=[];executed=new Set;isInitialized=!1;addTask(e){this.executed.has(e.name)||(this.tasks.push(e),this.isInitialized&&this.executeTask(e))}start(){if(this.isInitialized)return;this.isInitialized=!0,console.debug("[PERF] Starting deferred initialization..."),[...this.tasks].sort((r,o)=>{const n={high:0,medium:1,low:2};return n[r.priority]-n[o.priority]}).forEach(r=>this.executeTask(r))}executeTask(e){if(this.executed.has(e.name))return;const r=async()=>{try{console.debug(`[PERF] Executing deferred task: ${e.name}`),await e.task(),console.debug(`[PERF] Completed deferred task: ${e.name}`)}catch(o){console.error(`[PERF] Failed deferred task: ${e.name}`,o)}finally{this.executed.add(e.name)}};if("requestIdleCallback"in window)requestIdleCallback(r,{timeout:e.timeout||(e.priority==="high"?1e3:3e3)});else{const o=e.priority==="high"?0:e.priority==="medium"?50:100;setTimeout(r,o)}}isTaskExecuted(e){return this.executed.has(e)}}const t=new c,l=()=>{t.addTask({name:"analytics",priority:"low",task:async()=>{console.debug("[PERF] Analytics initialized (placeholder)")},timeout:5e3})},u=()=>{t.addTask({name:"charts",priority:"medium",task:async()=>{const{loadChartLibrary:i}=await a(async()=>{const{loadChartLibrary:e}=await import("./index-DnKT6hDb.js").then(r=>r.q);return{loadChartLibrary:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));await i(),console.debug("[PERF] Charts library preloaded")},timeout:2e3})},m=()=>{t.addTask({name:"bluetooth",priority:"medium",task:async()=>{if("bluetooth"in navigator){const{loadBluetoothLE:i}=await a(async()=>{const{loadBluetoothLE:e}=await import("./index-DnKT6hDb.js").then(r=>r.q);return{loadBluetoothLE:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));await i(),console.debug("[PERF] Bluetooth library preloaded")}},timeout:2e3})},h=()=>{t.addTask({name:"map",priority:"low",task:async()=>{const{loadMapboxGL:i}=await a(async()=>{const{loadMapboxGL:e}=await import("./index-DnKT6hDb.js").then(r=>r.q);return{loadMapboxGL:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));await i(),console.debug("[PERF] Map library preloaded")},timeout:3e3})},p=()=>{t.addTask({name:"service-worker",priority:"high",task:async()=>{if(s()){d("Service Worker registration (deferred)");return}if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.register("/sw.js");console.debug("[PERF] Service Worker registered",i),await navigator.serviceWorker.ready,console.debug("[PERF] Service Worker ready and caching assets")}catch(i){console.error("[PERF] Service Worker registration failed:",i)}},timeout:2e3})},y=()=>{t.addTask({name:"error-reporting",priority:"medium",task:()=>{window.addEventListener("error",i=>{console.error("[ERROR] Global error:",i.error)}),window.addEventListener("unhandledrejection",i=>{console.error("[ERROR] Unhandled promise rejection:",i.reason)}),console.debug("[PERF] Error reporting initialized")},timeout:1e3})},g=()=>{t.addTask({name:"main-thread-optimizer",priority:"high",task:async()=>{await a(()=>import("./mainThreadOptimizer-CQ0liOHA.js"),[]),console.debug("[PERF] Main Thread Optimizer loaded")},timeout:500})},F=()=>{console.debug("[PERF] Scheduling non-essential feature initialization..."),g(),p(),y(),m(),u(),l(),h(),t.start()};export{t as deferredInit,l as initAnalytics,m as initBluetooth,u as initCharts,y as initErrorReporting,g as initMainThreadOptimizer,h as initMap,F as initNonEssentialFeatures,p as initServiceWorker};
