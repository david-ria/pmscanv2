import{j as s}from"./query-BewfWFH7.js";import{r as T}from"./vendor-CRCfYjC_.js";import{u as w,B as v}from"./index-DnKT6hDb.js";import{C as j,a as f,b as S,c as P}from"./card-CRF2Wp6a.js";import{I as n}from"./input-CGNY8--s.js";import{L as h}from"./label-Dli8bNIx.js";import{S as H}from"./separator-auhcLEBW.js";import{useThresholds as I}from"./ThresholdContext-1SyiABzf.js";import{M}from"./MenuPageHeader-CcnmbX7d.js";import{u as O}from"./i18n-DZz6YkIP.js";import{useNavigate as R}from"./router-D6wdMmGF.js";import{R as k}from"./rotate-ccw-oD7EDUkY.js";import{S as L}from"./save-DuXH8Fwl.js";import"./supabase--OITQzG1.js";import"./theme-D-6-9UvQ.js";import"./ui-core-CibF-ClQ.js";import"./utils-EL5wpLGY.js";import"./notifications-6vUXhpBr.js";import"./ui-forms-BvHfx7SG.js";import"./ui-advanced-6HbTI6G8.js";import"./arrow-left-3u0J-11_.js";function rs(){const{t:e}=O(),g=R(),{toast:m}=w(),{thresholds:p,updateThresholds:N,resetToWHOStandards:b}=I(),[o,x]=T.useState(p),c=(r,i,a)=>{const t=parseFloat(a);isNaN(t)||t<0||x(l=>({...l,[r]:{...l[r],[i]:t}}))},u=r=>{for(const i of["pm1","pm25","pm10"]){const{good:a,moderate:t,poor:l}=r[i];if(a>=t||t>=l)return!1}return!0},C=()=>{if(!u(o)){m({title:e("common.error"),description:e("thresholds.validation.increasingOrder"),variant:"destructive"});return}N(o),m({title:e("common.success"),description:e("thresholds.saved")}),g("/profile")},y=()=>{b(),x(p),m({title:e("common.success"),description:e("thresholds.resetToWHO")})},d=(r,i,a="μg/m³")=>s.jsxs(j,{children:[s.jsx(S,{children:s.jsx(P,{className:"text-lg",children:i})}),s.jsxs(f,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{className:"text-sm text-air-good",children:[e("thresholds.levels.good")," (≤ ",a,")"]}),s.jsx(n,{type:"number",min:"0",step:"0.1",value:o[r].good,onChange:t=>c(r,"good",t.target.value),className:"text-center"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{className:"text-sm text-air-moderate",children:[e("thresholds.levels.moderate")," (≤ ",a,")"]}),s.jsx(n,{type:"number",min:"0",step:"0.1",value:o[r].moderate,onChange:t=>c(r,"moderate",t.target.value),className:"text-center"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(h,{className:"text-sm text-air-poor",children:[e("thresholds.levels.poor")," (≤ ",a,")"]}),s.jsx(n,{type:"number",min:"0",step:"0.1",value:o[r].poor,onChange:t=>c(r,"poor",t.target.value),className:"text-center"})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[e("thresholds.levels.veryPoor"),": ",">"," ",o[r].poor," ",a]})]})]},r);return s.jsx("div",{className:"min-h-screen bg-background px-4 py-6",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx(M,{title:e("thresholds.title"),subtitle:e("thresholds.subtitle")}),s.jsx(j,{className:"mb-6 border-primary/20 bg-primary/5",children:s.jsx(f,{className:"p-4",children:s.jsxs("p",{className:"text-sm",children:[s.jsxs("strong",{children:[e("thresholds.whoInfo.title"),":"]})," ",e("thresholds.whoInfo.description")]})})}),s.jsxs("div",{className:"space-y-6",children:[d("pm1","PM1"),d("pm25","PM2.5"),d("pm10","PM10")]}),s.jsx(H,{className:"my-6"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(v,{variant:"outline",onClick:y,className:"flex-1 min-h-[44px] touch-manipulation",children:[s.jsx(k,{className:"h-4 w-4 mr-2"}),e("thresholds.resetToWHO")]}),s.jsxs(v,{onClick:C,className:"flex-1 min-h-[44px] touch-manipulation",children:[s.jsx(L,{className:"h-4 w-4 mr-2"}),e("common.save")]})]}),!u(o)&&s.jsx("div",{className:"mt-4 p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:s.jsx("p",{className:"text-sm text-destructive",children:e("thresholds.validation.increasingOrder")})})]})})}export{rs as default};
