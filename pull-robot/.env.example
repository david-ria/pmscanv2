# =============================================================================
# PULL ROBOT CONFIGURATION
# =============================================================================
# Copy this file to .env and configure your environment variables

# =============================================================================
# MANDATORY SUPABASE CONFIGURATION (read-only credentials)
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key-here
SUPABASE_BUCKET=your-storage-bucket-name
SUPABASE_PREFIX=exports/

# =============================================================================
# MANDATORY EXTERNAL DASHBOARD API
# =============================================================================
DASHBOARD_ENDPOINT=https://your-dashboard-api.com/measurements
DASHBOARD_BEARER=your-bearer-token-here

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
# Port for health/metrics endpoints (Docker exposes this)
PORT=3000

# =============================================================================
# DATABASE & FILE PATHS
# =============================================================================
# SQLite database location (mounted volume in Docker)
DB_PATH=/app/data/robot-state.db
# Sensor mapping CSV file location (mounted volume in Docker)
SENSOR_MAP_PATH=/app/data/sensor_map.csv

# =============================================================================
# POLLING CONFIGURATION
# =============================================================================
# How often to check for new CSV files (milliseconds)
# Default: 300000 = 5 minutes
POLL_INTERVAL_MS=300000

# =============================================================================
# RATE LIMITING
# =============================================================================
# Maximum requests per second to external API
RATE_MAX_RPS=20

# =============================================================================
# RETRY CONFIGURATION
# =============================================================================
# Maximum attempts (including initial attempt)
MAX_ATTEMPTS=6
# Initial retry delay (milliseconds)
RETRY_DELAY_MS=1000
# Exponential backoff multiplier
BACKOFF_MULTIPLIER=2

# =============================================================================
# BATCH PROCESSING
# =============================================================================
# Maximum number of files to process per polling cycle
BATCH_SIZE=200

# =============================================================================
# METRICS CONFIGURATION
# =============================================================================
# Comma-separated list of metrics to include in API payloads
# Valid options: pm1,pm25,pm10,temperature,humidity
INCLUDE_METRICS=pm1,pm25,pm10

# Units mapping for each metric (JSON format)
UNITS_JSON={"pm1":"ugm3","pm25":"ugm3","pm10":"ugm3","temperature":"celsius","humidity":"percent"}

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================
# Logging level (debug, info, warn, error)
LOG_LEVEL=info